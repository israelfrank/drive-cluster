apiVersion: apps/v1
kind: Deployment
metadata:
  name: upload-deployment
  labels: 
    app: upload-service 
spec:
  replicas: 1
  selector:
    matchLabels:
      app: upload-service
  template:
    metadata:
      labels:
        app: upload-service
    spec:
      containers:
      - name: upload-container 
        image: israel.azurecr.io/upload-service/master:1d1fb04
        ports:
        - name: upload-ports
          containerPort: 8080
        env:
          - name: S3_ACCESS_KEY
            value: 'F6WUUG27HBUFSIXVZL59'
          - name: S3_SECRET_KEY
            value: 'BPlIUU6SX0ZxiCMo3tIpCMAUdnmkN9Eo9K42NsRR'
          - name: S3_ENDPOINT
            value: 'http://minio:9000'
          - name: TCP_PORT
            value: '8080'
          - name: HEALTH_CHECK_INTERVAL
            value: '5'
          - name: ELASTIC_APM_SERVER_URL
            value: 'http://localhost:8200'
          - name: ELASTIC_APM_SERVICE_NAME
            value: 'upload-service'
          - name: ELASTIC_APM_SERVICE_VERSION
            value: '0.1'
          - name: ELASTIC_APM_ENVIRONMENT
            value: 'development'
          - name: ELASTIC_APM_ACTIVE
            value: 'true'
          - name: ELASTIC_APM_CAPTURE_BODY
            value: 'all'
          - name: ELASTIC_APM_METRICS_INTERVAL
            value: '10s'
          - name: US_ELASTIC_APM_IGNORE_URLS
            value: '/grpc.health.v1.Health/Check'
        imagePullPolicy: IfNotPresent
      imagePullSecrets:
      - name: keyforaks  